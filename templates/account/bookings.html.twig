{% extends 'base.html.twig' %}

{% block title %}Vos réséervations passées et à venir !{% endblock %}

{% block body %}
  
  <div class="container">
     <h1 class="my-5">Mes reservations</h1>

     <div class=" col-8 alert alert-info mt-5">
        <p>Retrouvez ci-dessous vos reservations passées et à venir</p>
     </div>

     {% for booking in app.user.bookings %}

     {% set ad = booking.ad %}
       
       <div class="row mt-3">
          <div class="col-md-4">
             <img class="img-fluid" src="{{ad.coverImage}}" alt="Photo de l'annnoce {{ad.title}}">
             <div class="mt-3">
              {% set comment = ad.commentFromAuthor(app.user)%} 
              {% if comment is not null %}
              <strong>Note :</strong> {% include 'partials/rating.html.twig' with {'rating': comment.rating} %}
              {% else %}
              <p>Vous n'avez pas encore donné de note</p>
              <a href="{{path('booking_show',{'id': booking.id}) }}#comment">Je donne mon avis ?</a>
              {% endif %}
             </div>
          </div>
          <div class="col-md-8">
            <h4>{{ad.title}}</h4>
            <p>Reservation <strong>n°{{booking.id}}</strong><br>
               Du {{booking.startDate | date('d/m/Y')}} au {{booking.endDate | date('d/m/Y')}} à ( {{booking.amount | number_format(2, ',',' ')}} &nbsp€ ) 
            </p>

            <a href="{{path('booking_show' , {'id' : booking.id })}}" class="btn btn-info">Plus d'informations</a>
          </div>
       </div>

     {% endfor %}
  </div>

{% endblock %}